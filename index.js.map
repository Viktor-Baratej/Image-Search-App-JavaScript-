{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/main.js","../src/js/render-functions.js"],"sourcesContent":["import axios from 'axios';\n\nexport let pages = 1;\nexport let maxPhoto = 15;\n\nexport function incrementPage() {\n  pages += 1;\n}\n\nexport function resetPage() {\n  pages = 1;\n}\n\nexport async function fetchImages(userInput) {\n  const keyApi = '46773204-8ec36d0a78d9132ebe706b3ce';\n\n  const params = new URLSearchParams({\n    key: keyApi,\n    q: userInput,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: pages,\n    per_page: maxPhoto,\n  });\n\n  const response = await axios.get(`https://pixabay.com/api/?${params}`);\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {\n  fetchImages,\n  incrementPage,\n  pages,\n  resetPage,\n} from './js/pixabay-api.js';\n\nimport {\n  renderImages,\n  showLoading,\n  hideLoading,\n} from './js/render-functions.js';\n\nconst body = document.querySelector('body');\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  loop: true,\n});\n\nconst form = document.querySelector('.form');\nconst userInput = document.querySelector('.user-input');\nconst btnPages = document.querySelector('.btn-load');\n\nfunction showBtn() {\n  btnPages.classList.remove('hidden');\n}\n\nexport function closeBtn() {\n  btnPages.classList.add('hidden');\n}\n\ncloseBtn();\n\nlet userText;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  userText = userInput.value.trim();\n\n  if (userText) {\n    resetPage();\n    showLoading();\n    btnPages.removeEventListener('click', loadMoreImages);\n\n    try {\n      const data = await fetchImages(userText);\n      if (!renderImages(data, lightbox)) {\n        iziToast.error({\n          message: 'No images found. Try a different query!',\n          position: 'topRight',\n        });\n        closeBtn();\n      } else if (data.totalHits > 15) {\n        showBtn();\n        btnPages.addEventListener('click', loadMoreImages);\n      }\n    } catch (error) {\n      iziToast.error({\n        message: 'An error occurred while fetching images. Please try again.',\n        position: 'topRight',\n      });\n    } finally {\n      hideLoading();\n    }\n  }\n});\n\nasync function loadMoreImages() {\n  incrementPage();\n  showLoading();\n  try {\n    const data = await fetchImages(userText);\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        message: 'No more images to load.',\n        position: 'topRight',\n      });\n      closeBtn();\n    } else {\n      renderImages(data, lightbox);\n      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Failed to load more images. Please try again.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoading();\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages, pages, maxPhoto } from './pixabay-api';\nimport { closeBtn } from '../main';\n\nconst div = document.querySelector('.wrapp');\nconst list = document.querySelector('.gallery');\n\nexport function renderImages(data, lightbox) {\n  if (data.total === 0) {\n    list.innerHTML = '';\n    return;\n  } else {\n    const maxPages = Math.ceil(data.totalHits / maxPhoto);\n    if (pages >= maxPages) {\n      closeBtn();\n      iziToast.error({\n        message: \"You've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n\n    const smallImg = data.hits\n      .map(\n        item => `\n          <li class=\"gallery-item\">\n            <a href=\"${item.largeImageURL}\" data-source=\"${item.largeImageURL}\">\n              <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" />\n            </a>\n            <div class=\"wrapp-items\">\n              <div class=\"info-item\"><p class=\"bold\">Likes</p><p>${item.likes}</p></div>\n              <div class=\"info-item\"><p class=\"bold\">Views</p><p>${item.views}</p></div>\n              <div class=\"info-item\"><p class=\"bold\">Comments</p><p>${item.comments}</p></div>\n              <div class=\"info-item\"><p class=\"bold\">Downloads</p><p>${item.downloads}</p></div>\n            </div>\n          </li>`\n      )\n      .join('');\n\n    list.innerHTML = pages === 1 ? smallImg : list.innerHTML + smallImg;\n    lightbox.refresh();\n    return true;\n  }\n}\n\nexport function showLoading() {\n  div.classList.remove('hidden');\n}\n\nexport function hideLoading() {\n  div.classList.add('hidden');\n}\n"],"names":["pages","maxPhoto","incrementPage","resetPage","fetchImages","userInput","keyApi","params","axios","lightbox","SimpleLightbox","form","btnPages","showBtn","closeBtn","userText","event","showLoading","loadMoreImages","data","renderImages","iziToast","hideLoading","div","list","maxPages","smallImg","item"],"mappings":"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"}